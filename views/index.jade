doctype html
html
  head
    title CBC 2016
    meta(name="viewport", content="width=device-width, initial-scale=1")

    link(href='https://fonts.googleapis.com/css?family=Oswald:400,700', rel='stylesheet', type='text/css')
    link(href="/css/cbc.css", type="text/css", rel="stylesheet")
    script(type="text/javascript").
      window.beers = !{JSON.stringify(beers)};
      window.breweries = !{JSON.stringify(breweries)};
      window.superstyles = !{JSON.stringify(superstyles)};
      window.metastyles = !{JSON.stringify(metastyles)};
  body
    #window
    #exportfield
      label(for="export") Copy this link to another device to transfer your saved/tasted beers.
      input#export

  script(type="text/html", class="template", data-template-id="index")
    #main-menu
      | {{#msg}}
      .msg {{.}}
      | {{/msg}}
      h1 Sessions
      .sessions
        a(href='#session[{"colour":"yellow"}]', class="session yellow") 
          h2 Yellow
          .sub Friday 10-14
        a(href='#session[{"colour":"blue"}]', class="session blue") 
          h2 Blue
          .sub Friday 16-20
        a(href='#session[{"colour":"red"}]', class="session red") 
          h2 Red
          .sub Saturday 10-14
        a(href='#session[{"colour":"green"}]', class="session green") 
          h2 Green
          .sub Saturday 16-20
      .beer-lists
        a(href="#beerlist", class="all-beers-sel") All Beers

  script(type="text/html", class="template", data-template-id="beerlist")
    #beerlist(class="{{typeclass}} {{saved}} {{tasted}} order-{{order}} ms-{{metastyle}}")
      h1 {{title}}
        sub {{beer_count}} beers, {{breweries.length}} brewers listed
      .container
        .order.bar
          a.site-bg-style.avg(href='{{#tset}}order=score{{/tset}}') Avg
          a.site-bg-style.hype(href='{{#tset}}order=hype{{/tset}}') Hype
          a.site-bg-style.untappd(href='{{#tset}}order=untappd{{/tset}}') UT
          a.site-bg-style.ratebeer(href='{{#tset}}order=ratebeer{{/tset}}') RB
          a.site-bg-style.beeradvocate(href='{{#tset}}order=beeradvocate{{/tset}}') BA
          | {{#order}}
          a(href='{{#tset}}order=!{{/tset}}') ✘ Reset
          | {{/order}}
        .filter.bar
          a.tasted(href='{{#tset}}tasted=tasted{{/tset}}') ✔
          a.not-tasted(href='{{#tset}}tasted=not-tasted{{/tset}}') NOT ✔
          a.saved(href='{{#tset}}saved=saved{{/tset}}') ★
          a.not-saved(href='{{#tset}}saved=not-saved{{/tset}}') NOT ★
          a(href='{{#tset}}saved=!,tasted=!{{/tset}}') ✘ Reset
        .key.bar
          | {{#metastyles}}
          a.style-border(class="{{.}}", href='{{#tset}}metastyle={{.}}{{/tset}}') {{.}}
          | {{/metastyles}}
          | {{#metastyle}}
          a(href='{{#tset}}metastyle={{/tset}}') ✘ Reset
          | {{/metastyle}}
        | {{#breweries}}
        .brewery
          h2 {{name}}
          .beers
            | {{#beers}}
            .beer.style-border(class="{{metastyle}} {{session}} {{saved}} {{tasted}}", data-id="{{id}}")
              .headline
                .name {{name}}
                .abv {{percent}}%
                .style {{superstyle}}
                .marks 
                  a.star ★
                  a.tick ✔
                .ratings
                  .site-bg-style.score.avg {{avg_score_fixed}}{{score_rank_br}}
                  .site-bg-style.score.hype {{hype_score_fixed}}{{hype_rank_br}}
                  a.site-bg-style.score.untappd(href="{{untappd_url}}", target="_blank") {{untappd}}{{untappd_rank_br}}
                  a.site-bg-style.score.ratebeer(href="{{ratebeer_url}}", target="_blank") {{ratebeer}}{{ratebeer_rank_br}}
                  .site-bg-style.score.beeradvocate(href="{{beeradvocate_url}}", target="_blank") {{beeradvocate_clamped}}{{beeradvocate_rank_br}}
                .expanded
                  .style Brewer's description: <strong>{{style}}</strong>
                  .desc {{trunc_desc}}


            | {{/beers}}

        | {{/breweries}}


  script(type="text/javascript", src="/js/jquery-2.2.3.min.js")
  script(type="text/javascript", src="/js/underscore-min.js")
  script(type="text/javascript", src="/js/mustache.min.js")
  script(type="text/javascript", src="/js/rate.js")
  script(type="text/javascript", src="/js/cbc.js")
